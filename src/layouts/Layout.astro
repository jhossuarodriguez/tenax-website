---
import { ClientRouter } from 'astro:transitions'
import '@/styles/global.css'
import Header from '@/components/Header.astro'
import Footer from '@/components/Footer.astro'
import Analytics from '@vercel/analytics/astro'

interface Props {
  canonical: string
  title?: string
  description?: string
  noindex?: boolean
  footerLinks?: string[]
}

const SITE_URL = 'https://tenaxconstruction.com.do'
const DEFAULT_TITLE = 'Tenax Construction | Constructora en Santo Domingo, RD'
const DEFAULT_DESCRIPTION =
  'Constructora dominicana experta en administración, construcción y supervisión de obras civiles y naves industriales.'

const {
  canonical,
  title = DEFAULT_TITLE,
  description = DEFAULT_DESCRIPTION,
  noindex = false,
  footerLinks,
} = Astro.props

const canonicalURL = canonical.startsWith('http') ? canonical : `${SITE_URL}${canonical}`
const ogImageURL = `${SITE_URL}/og.webp`
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="author" content="Jhossua Roa Rodriguez" />

    <!-- Robots -->
    <meta name="robots" content={noindex ? 'noindex, nofollow' : 'index, follow'} />

    <!-- Canonical URL - Always present -->
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImageURL} />
    <meta property="og:site_name" content="Tenax Construction" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageURL} />

    <link
      rel="icon"
    type="image/webp+xml"
      href="/favicon.webp"
      title="Tenax Construction favicon"
    />

    <ClientRouter />

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "GeneralContractor",
        "name": "Tenax Construction",
        "image": "https://tenaxconstruction.com.do/logo-tenax.webp",
        "url": "https://tenaxconstruction.com.do",
        "telephone": "+18098986028",
        "priceRange": "$$",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Av. 27 de Febrero, Esq. Calle el Seminario #261, Plaza Comercial APH, 4to Piso",
          "addressLocality": "Santo Domingo",
          "postalCode": "10100",
          "addressCountry": "DO"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": 18.468494,
          "longitude": -69.939223
        },
        "hasMap": "https://maps.app.goo.gl/sa4gHQfY2zJr4QbFA",
        "openingHoursSpecification": {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "08:00",
          "closes": "17:00"
        },
        "sameAs": [
          "https://www.instagram.com/tenaxconstruction",
          "https://www.linkedin.com/company/tenax-construction-srl"
        ],
        "description": "Constructora dominicana experta en administración, diseño y supervisión de obras civiles, naves industriales y estructuras metálicas."
      }
    </script>
  </head>
  <body class="mx-auto w-full h-dvh">
    <Header />
    <main>
      <slot />
    </main>
    <Footer links={footerLinks} />
    <Analytics />

    <script>
      import '@/utils/revealEffect.js'
    </script>
  </body>
</html>
<style>
  html,
  body {
    font-family: 'Poppins', system-ui;
    margin: 0;
    width: 100%;
    height: 100%;
    color: white;
    background-color: #f5f5f5;
    scroll-behavior: smooth;
    scroll-padding-top: 60px;
  }
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
</style>
